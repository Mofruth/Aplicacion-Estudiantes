<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Asignaturas</title>
    <style>
        * { margin:0; padding:0; box-sizing:border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; display:flex; min-height:100vh; background-color:#f5f5f7; }
        .sidebar { width:275px; background-color:#2d3142; color:white; padding:30px 20px; display:flex; flex-direction:column; }
        .sidebar-header { font-size:24px; font-weight:600; color:#4facfe; margin-bottom:40px; padding-left:10px; }
        .sidebar-menu { list-style:none; flex-grow:1; }
        .sidebar-item { margin-bottom:8px; }
        .sidebar-link { display:flex; align-items:center; padding:12px 15px; color:#b8bcc8; text-decoration:none; border-radius:8px; transition:all 0.3s; font-size:15px; }
        .sidebar-link:hover { background-color:#3d4157; color:white; }
        .sidebar-link.active { background-color:#4facfe; color:white; }
        .sidebar-icon { width:20px; height:20px; margin-right:12px; }
        .main-content { flex:1; padding:40px 50px; overflow-y:auto; }
        .page-header { font-size:32px; font-weight:700; color:#4facfe; margin-bottom:30px; padding-bottom:20px; border-bottom:2px solid #e0e0e0; }
        .list { display:grid; grid-template-columns: repeat(auto-fill, minmax(280px,1fr)); gap:20px; margin-top:20px; }
        .item { background:white; padding:18px; border-radius:10px; box-shadow:0 2px 8px rgba(0,0,0,0.06); display:flex; justify-content:space-between; align-items:center; }
        .item h4 { margin:0; font-size:16px; color:#2d3142; }
        .item p { margin:6px 0 0 0; font-size:13px; color:#666; }
        .ins-btn { background:#4facfe; color:white; border:none; padding:8px 12px; border-radius:6px; cursor:pointer; }
        .ins-btn[disabled] { background:#ddd; color:#666; cursor:not-allowed; }
        @media (max-width:768px) { .sidebar { width:200px; } .main-content { padding:20px; } }
    </style>
</head>
<body>
    {% set active_page = 'asignaturas' %}
    {% include 'estudiante/_sidebar.html' %}

    <div class="main-content">
        <h1 class="page-header">Asignaturas</h1>
        {% if materias %}
        <div class="list">
            {% for m in materias %}
            <div class="item">
                <div>
                    <h4>{{ m.nombre }}</h4>
                    <p>{{ m.descripcion }}</p>
                </div>
                <div>
                    <form method="POST" action="{{ url_for('inscribir_materia') }}">
                        <input type="hidden" name="id_materia" value="{{ m.id }}">
                        {% if usuario.puede_inscribirse %}
                            <button class="ins-btn" type="submit">Inscribirse</button>
                        {% else %}
                            <button class="ins-btn" type="button" disabled>No autorizado</button>
                        {% endif %}
                    </form>
                </div>
            </div>
            {% endfor %}
        </div>
        {% else %}
        <p style="color:#999;">No hay asignaturas disponibles.</p>
        {% endif %}
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const sidebarLinks = document.querySelectorAll('.sidebar-link');
            sidebarLinks.forEach(link => {
                link.addEventListener('click', function() {
                    sidebarLinks.forEach(l => l.classList.remove('active'));
                    this.classList.add('active');
                });
            });
        });
    </script>
</body>
</html>
